<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Title</title>
    <style>
        .wrapper1 {
            background-color: blue;
            height: 400px;
        }

        .wrapper2 {
            display: flex;
        }

        .tr1 {
            width: 300px;
            height: 300px;
            background: red;
            opacity: 1;
        }

        .tr2 {
            width: 300px;
            height: 300px;
            background: sandybrown;
            opacity: 1;
        }
    </style>
</head>
<body style="height: 1500px;">


<div class="wrapper1">1</div>
<div class="wrapper2">
    <div class="tr1"></div>
    <div class="tr2"></div>
</div>
<div class="wrapper3">3</div>
<div class="wrapper4">4</div>

<script>
  var eles = document.getElementsByClassName('wrapper2')[0].getElementsByTagName('div');
  var animations = [
    [
      [
        {transform: 'translateY(0px)'},
        {transform: 'translateY(300px)'}
      ],
      {
        // 在300px 之后开始执行动画
        delay: 300,
        //滚动多长时间100px 高度 持续时间
        duration: 200,
        // 保持最后的动画效果
        fill: 'both',
        // iterations:Infinity 无限次 默认值为1，
      }
    ],
    [
      [
        {transform: 'translateY(400px)'},
        {transform: 'translateY(0px)'}
      ],
      {
        delay: 300,
        duration: 200,
        // 保持最后的动画效果
        fill: 'both',
      }]
  ]
  xele = new Map(Array.from(eles).map((item, i) => [i, item]))
  var arranims = [];
  for (let [index, item] of xele) {
    console.log(item)
    arranims.push(item.animate(animations[index][0], animations[index][1]))
  }
  console.log(arranims)
  arranims.forEach(x => x.pause());

  function handleScroll() {
    var scrollYs = window.scrollY || document.documentElement.scrollTop;
    if (arranims.length) {
        console.log(x);
      arranims.forEach(x => x.currentTime = scrollYs);
    }
  }

  function startAnimatie(eles, animations) {
    document.addEventListener('scroll', handleScroll);
  }

  startAnimatie(eles, animations)
</script>

</body>
</html>
